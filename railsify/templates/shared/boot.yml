---
boot:
  - snippets:
    - file: Gemfile
      insert:
        - code: |
                gem 'autoprefixer-rails'
                gem 'foundation-rails'
                gem 'puma'
          where: end
      replace:
        - code: gem 'coffee-rails'
          with: "# gem 'coffee-rails'"

    - file: config/application.rb
      insert:
        - code: |2+
                config.time_zone = 'Europe/Moscow'
                config.i18n.default_locale = :ru

          where: after
          selector: |
                    class Application < Rails::Application

    - file: app/assets/javascripts/application.js
      delete:
        - code: |
                //= require_tree .
      insert:
        - code: |
                //= require foundation_custom

                //= require common
          where: end
      replace:
        - code: |
                //= require jquery
          with: |
                //= require jquery2

    # Some layout defaults
    - file: app/views/layouts/application.html.erb
      insert:
        - code: |2+
              <meta charset="utf-8">
              <meta http-equiv="x-ua-compatible" content="ie=edge">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
          where: after
          selector: |
                    <head>
        - code: |
                <!--[if lt IE 10]>
                  <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
                <![endif]-->
          where: after
          selector: |
                    <body>
        - code: |
                <%= yield :footer_scripts %>
          where: before
          selector: |
                    </body>
      replace:
        - code: <html>
          with: <html lang="<%= I18n.locale %>">
        - code: </title>
          with: ' | <%= yield :title %></title>'

  - tasks:
    - command: rm app/assets/stylesheets/application.css
