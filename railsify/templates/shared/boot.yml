---
boot:
  - snippets:
    - file: Gemfile
      insert:
        - code: |
                gem 'bourbon'
                gem 'puma'
          where: end
      replace:
        - code: gem 'coffee-rails'
          with: "# gem 'coffee-rails'"
        - code: gem 'spring'
          with: "# gem 'spring'"

    - file: config/application.rb
      insert:
        - code: |2+
                config.time_zone = 'Europe/Moscow'
                config.i18n.default_locale = :ru

          where: after
          selector: |
                    class Application < Rails::Application

    - file: app/assets/javascripts/application.js
      delete:
        - code: |
                //= require_tree .
      insert:
        - code: |
                //= require common
          where: end
      replace:
        - code: |
                //= require jquery
          with: |
                //= require jquery2

    # Some layout defaults
    - file: app/views/layouts/application.html.erb
      insert:
        - code: |
                <%= yield :footer_scripts %>
          where: before
          selector: |
                    </body>
      replace:
        - code: <html>
          with: <html lang="<%= I18n.locale %>">
        - code: </title>
          with: ' | <%= yield :title %></title>'

  - tasks:
    - command: rm app/assets/stylesheets/application.css
    - command: rake db:drop db:create
